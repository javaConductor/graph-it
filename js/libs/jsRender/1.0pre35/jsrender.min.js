/*! JsRender v1.0pre: http://github.com/BorisMoore/jsrender */
(function(global,jQuery,undefined){if(jQuery&&jQuery.views||global.jsviews){return}var versionNumber="v1.0pre",$,jsvStoreName,rTag,rTmplString,delimOpenChar0="{",delimOpenChar1="{",delimCloseChar0="}",delimCloseChar1="}",linkChar="^",rPath=/^(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,rParams=/(\()(?=\s*\()|(?:([([])\s*)?(?:([#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*!:?\/]|(=))\s*|([#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^)|[)\]])([([]?))|(\s+)/g,rNewLine=/\s*\n/g,rUnescapeQuotes=/\\(['"])/g,rEscapeQuotes=/\\?(['"\\])/g,rBuildHash=/\x08(~)?([^\x08]+)\x08/g,rTestElseIf=/^if\s/,rFirstElem=/<(\w+)[>\s]/,rPrevElem=/<(\w+)[^>\/]*>[^>]*$/,rAttrEncode=/[><"'&]/g,rHtmlEncode=/[><"'&]/g,autoTmplName=0,viewId=0,charEntities={"&":"&amp;","<":"&lt;",">":"&gt;","\x00":"&#0;","'":"&#39;",'"':"&#34;"},tmplAttr="data-jsv-tmpl",slice=[].slice,$render={},jsvStores={template:{compile:compileTmpl},tag:{compile:compileTag},helper:{},converter:{}},$views={jsviews:versionNumber,render:$render,settings:{delimiters:$viewsDelimiters,debugMode:true,tryCatch:true},sub:{View:View,Error:JsViewsError,tmplFn:tmplFn,parse:parseParams,extend:$extend,error:error,syntaxError:syntaxError},_cnvt:convertVal,_tag:renderTag,_err:function(e){return $viewsSettings.debugMode?("Error: "+(e.message||e))+". ":""}};function JsViewsError(message,object){if(object&&object.onError){if(object.onError(message)===false){return}}this.name="JsRender Error";this.message=message||"JsRender error"}function $extend(target,source){var name;target=target||{};for(name in source){target[name]=source[name]}return target}(JsViewsError.prototype=new Error()).constructor=JsViewsError;function $viewsDelimiters(openChars,closeChars,link){if(!$viewsSub.rTag||arguments.length){delimOpenChar0=openChars?openChars.charAt(0):delimOpenChar0;delimOpenChar1=openChars?openChars.charAt(1):delimOpenChar1;delimCloseChar0=closeChars?closeChars.charAt(0):delimCloseChar0;delimCloseChar1=closeChars?closeChars.charAt(1):delimCloseChar1;linkChar=link||linkChar;openChars="\\"+delimOpenChar0+"(\\"+linkChar+")?\\"+delimOpenChar1;closeChars="\\"+delimCloseChar0+"\\"+delimCloseChar1;rTag="(?:(?:(\\w+(?=[\\/\\s\\"+delimCloseChar0+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+delimCloseChar0+"]|\\"+delimCloseChar0+"(?!\\"+delimCloseChar1+"))*?)";$viewsSub.rTag=rTag+")";rTag=new RegExp(openChars+rTag+"(\\/)?|(?:\\/(\\w+)))"+closeChars,"g");rTmplString=new RegExp("<.*>|([^\\\\]|^)[{}]|"+openChars+".*"+closeChars)}return[delimOpenChar0,delimOpenChar1,delimCloseChar0,delimCloseChar1,linkChar]}function getView(inner,type){if(!type){type=inner;inner=undefined}var views,i,l,found,view=this,root=!type||type==="root";if(inner){found=view.type===type?view:undefined;if(!found){views=view.views;if(view._.useKey){for(i in views){if(found=views[i].get(inner,type)){break}}}else{for(i=0,l=views.length;!found&&i<l;i++){found=views[i].get(inner,type)}}}}else{if(root){while(view.parent.parent){found=view=view.parent}}else{while(view&&!found){found=view.type===type?view:undefined;view=view.parent}}}return found}function getIndex(){var view=this.get("item");return view?view.index:undefined}getIndex.depends=function(){return[this.get("item"),"index"]};function getHelper(helper){var wrapped,view=this,res=(view.ctx||{})[helper];res=res===undefined?view.getRsc("helpers",helper):res;if(res){if(typeof res==="function"){wrapped=function(){return res.apply(view,arguments)};$extend(wrapped,res)}}return wrapped||res}function convertVal(converter,view,tagCtx){var tmplConverter,tag,value,boundTagCtx=+tagCtx===tagCtx&&tagCtx,linkCtx=view.linkCtx;if(boundTagCtx){tagCtx=(boundTagCtx=view.tmpl.bnds[boundTagCtx-1])(view.data,view,$views)}value=tagCtx.args[0];if(converter||boundTagCtx){tag=linkCtx&&linkCtx.tag||{_:{inline:!linkCtx},tagName:converter+":",flow:true,_is:"tag"};tag._.bnd=boundTagCtx;if(linkCtx){linkCtx.tag=tag;tag.linkCtx=linkCtx;tagCtx.ctx=extendCtx(tagCtx.ctx,linkCtx.view.ctx)}tag.tagCtx=tagCtx;tagCtx.view=view;tag.ctx=tagCtx.ctx||{};delete tagCtx.ctx;view._.tag=tag;converter=converter!=="true"&&converter;if(converter&&((tmplConverter=view.getRsc("converters",converter))||error("Unknown converter: {{"+converter+":"))){tag.depends=tmplConverter.depends;value=tmplConverter.apply(tag,tagCtx.args)}value=boundTagCtx&&view._.onRender?view._.onRender(value,view,boundTagCtx):value;view._.tag=undefined}return value}function getResource(resourceType,itemName){var res,view=this,store=$views[resourceType];res=store&&store[itemName];while((res===undefined)&&view){store=view.tmpl[resourceType];res=store&&store[itemName];view=view.parent}return res}function renderTag(tagName,parentView,tmpl,tagCtxs){var render,tag,tags,attr,isElse,parentTag,i,l,itemRet,tagCtx,tagCtxCtx,content,boundTagFn,tagDef,ret="",boundTagKey=+tagCtxs===tagCtxs&&tagCtxs,linkCtx=parentView.linkCtx||0,ctx=parentView.ctx,parentTmpl=tmpl||parentView.tmpl,parentView_=parentView._;if(tagName._is==="tag"){tag=tagName;tagName=tag.tagName}if(boundTagKey){tagCtxs=(boundTagFn=parentTmpl.bnds[boundTagKey-1])(parentView.data,parentView,$views)}l=tagCtxs.length;tag=tag||linkCtx.tag;for(i=0;i<l;i++){tagCtx=tagCtxs[i];content=tagCtx.tmpl;content=tagCtx.content=content&&parentTmpl.tmpls[content-1];tmpl=tagCtx.props.tmpl;if(!i&&(!tmpl||!tag)){tagDef=parentView.getRsc("tags",tagName)||error("Unknown tag: {{"+tagName+"}}")}tmpl=tmpl||!i&&tagDef.template||content;tmpl=""+tmpl===tmpl?parentView.getRsc("templates",tmpl)||$templates(tmpl):tmpl;$extend(tagCtx,{tmpl:tmpl,render:renderContent,index:i,view:parentView,ctx:extendCtx(tagCtx.ctx,ctx)});if(!tag){if(tagDef.init){tag=new tagDef.init(tagCtx,linkCtx,ctx);tag.attr=tag.attr||tagDef.attr||undefined}else{tag={render:tagDef.render}}tag._={inline:!linkCtx};if(linkCtx){linkCtx.attr=tag.attr=linkCtx.attr||tag.attr;linkCtx.tag=tag;tag.linkCtx=linkCtx}if(tag._.bnd=boundTagFn||linkCtx){tag._.arrVws={}}tag.tagName=tagName;tag.parent=parentTag=ctx&&ctx.tag,tag._is="tag"}parentView_.tag=tag;tagCtx.tag=tag;tag.tagCtxs=tagCtxs;tag.rendering={};if(!tag.flow){tagCtxCtx=tagCtx.ctx=tagCtx.ctx||{};tags=tagCtxCtx.parentTags=ctx&&extendCtx(tagCtxCtx.parentTags,ctx.parentTags)||{};if(parentTag){tags[parentTag.tagName]=parentTag}tagCtxCtx.tag=tag}}for(i=0;i<l;i++){tagCtx=tag.tagCtx=tagCtxs[i];tag.ctx=tagCtx.ctx;if(render=tag.render){itemRet=render.apply(tag,tagCtx.args)}ret+=itemRet!==undefined?itemRet:tagCtx.tmpl?tagCtx.render():""}delete tag.rendering;tag.tagCtx=tag.tagCtxs[0];tag.ctx=tag.tagCtx.ctx;if(tag._.inline&&(attr=tag.attr)&&attr!=="html"){ret=attr==="text"?$converters.html(ret):""}return ret=boundTagKey&&parentView._.onRender?parentView._.onRender(ret,parentView,boundTagKey):ret}function View(context,type,parentView,data,template,key,contentTmpl,onRender){var views,parentView_,tag,isArray=type==="array",self_={key:0,useKey:isArray?0:1,id:""+viewId++,onRender:onRender,bnds:{}},self={data:data,tmpl:template,content:contentTmpl,views:isArray?[]:{},parent:parentView,ctx:context,type:type,get:getView,getIndex:getIndex,getRsc:getResource,hlp:getHelper,_:self_,_is:"view"};if(parentView){views=parentView.views;parentView_=parentView._;if(parentView_.useKey){views[self_.key="_"+parentView_.useKey++]=self;tag=parentView_.tag;self_.bnd=isArray&&(!tag||!!tag._.bnd&&tag)}else{views.splice(self_.key=self.index=key!==undefined?key:views.length,0,self)}self.ctx=context||parentView.ctx}return self}function compileChildResources(parentTmpl){var storeName,resources,resourceName,settings,compile;for(storeName in jsvStores){settings=jsvStores[storeName];if((compile=settings.compile)&&(resources=parentTmpl[storeName+"s"])){for(resourceName in resources){resources[resourceName]=compile(resourceName,resources[resourceName],parentTmpl,storeName,settings)}}}}function compileTag(name,item,parentTmpl){var init,tmpl;if(typeof item==="function"){item={depends:item.depends,render:item}}else{if(tmpl=item.template){item.template=""+tmpl===tmpl?($templates[tmpl]||$templates(tmpl)):tmpl}if(item.init!==false){init=item.init=item.init||function(tagCtx){};init.prototype=item;(init.prototype=item).constructor=init}}if(parentTmpl){item._parentTmpl=parentTmpl}return item}function compileTmpl(name,tmpl,parentTmpl,storeName,storeSettings,options){function tmplOrMarkupFromStr(value){if((""+value===value)||value.nodeType>0){try{elem=value.nodeType>0?value:!rTmplString.test(value)&&jQuery&&jQuery(global.document).find(value)[0]}catch(e){}if(elem){value=elem.getAttribute(tmplAttr);name=name||value;value=$templates[value];if(!value){name=name||"_"+autoTmplName++;elem.setAttribute(tmplAttr,name);value=$templates[name]=compileTmpl(name,elem.innerHTML,parentTmpl,storeName,storeSettings,options)}}return value}}var tmplOrMarkup,elem;tmpl=tmpl||"";tmplOrMarkup=tmplOrMarkupFromStr(tmpl);options=options||(tmpl.markup?tmpl:{});options.tmplName=name;if(parentTmpl){options._parentTmpl=parentTmpl}if(!tmplOrMarkup&&tmpl.markup&&(tmplOrMarkup=tmplOrMarkupFromStr(tmpl.markup))){if(tmplOrMarkup.fn&&(tmplOrMarkup.debug!==tmpl.debug||tmplOrMarkup.allowCode!==tmpl.allowCode)){tmplOrMarkup=tmplOrMarkup.markup}}if(tmplOrMarkup!==undefined){if(name&&!parentTmpl){$render[name]=function(){return tmpl.render.apply(tmpl,arguments)}}if(tmplOrMarkup.fn||tmpl.fn){if(tmplOrMarkup.fn){if(name&&name!==tmplOrMarkup.tmplName){tmpl=extendCtx(options,tmplOrMarkup)}else{tmpl=tmplOrMarkup}}}else{tmpl=TmplObject(tmplOrMarkup,options);tmplFn(tmplOrMarkup,tmpl)}compileChildResources(options);return tmpl}}function TmplObject(markup,options){var htmlTag,wrapMap=$viewsSettings.wrapMap||{},tmpl=$extend({markup:markup,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:renderContent},options);if(!options.htmlTag){htmlTag=rFirstElem.exec(markup);tmpl.htmlTag=htmlTag?htmlTag[1].toLowerCase():""}htmlTag=wrapMap[tmpl.htmlTag];if(htmlTag&&htmlTag!==wrapMap.div){tmpl.markup=$.trim(tmpl.markup);tmpl._elCnt=true}return tmpl}function registerStore(storeName,storeSettings){function theStore(name,item,parentTmpl){var onStore,compile,itemName,thisStore;if(name&&""+name!==name&&!name.nodeType&&!name.markup){for(itemName in name){theStore(itemName,name[itemName],item)}return $views}if(item===undefined){item=name;name=undefined}if(name&&""+name!==name){parentTmpl=item;item=name;name=undefined}thisStore=parentTmpl?parentTmpl[storeNames]=parentTmpl[storeNames]||{}:theStore;compile=storeSettings.compile;if(onStore=$viewsSub.onBeforeStoreItem){compile=onStore(thisStore,name,item,compile)||compile}if(!name){item=compile(undefined,item)}else{if(item===null){delete thisStore[name]}else{thisStore[name]=compile?(item=compile(name,item,parentTmpl,storeName,storeSettings)):item}}if(item){item._is=storeName}if(onStore=$viewsSub.onStoreItem){onStore(thisStore,name,item,compile)}return item}var storeNames=storeName+"s";$views[storeNames]=theStore;jsvStores[storeName]=storeSettings}function renderContent(data,context,parentView,key,isLayout,onRender){var i,l,dataItem,newView,childView,itemResult,swapContent,tagCtx,contentTmpl,tag_,outerOnRender,tmplName,tmpl,self=this,allowDataLink=!self.attr||self.attr==="html",result="";if(key===true){swapContent=true;key=0}if(self.tag){tagCtx=self;self=self.tag;tag_=self._;tmplName=self.tagName;tmpl=tagCtx.tmpl;context=extendCtx(context,self.ctx);contentTmpl=tagCtx.content;if(tagCtx.props.link===false){context=context||{};context.link=false}parentView=parentView||tagCtx.view;data=data===undefined?parentView:data}else{tmpl=self.jquery&&(self[0]||error('Unknown template: "'+self.selector+'"'))||self}if(tmpl){if(!parentView&&data&&data._is==="view"){parentView=data}if(parentView){contentTmpl=contentTmpl||parentView.content;onRender=onRender||parentView._.onRender;if(data===parentView){data=parentView.data;isLayout=true}context=extendCtx(context,parentView.ctx)}if(!parentView||parentView.data===undefined){(context=context||{}).root=data}if(!tmpl.fn){tmpl=$templates[tmpl]||$templates(tmpl)}if(tmpl){onRender=(context&&context.link)!==false&&allowDataLink&&onRender;outerOnRender=onRender;if(onRender===true){outerOnRender=undefined;onRender=parentView._.onRender}if($.isArray(data)&&!isLayout){newView=swapContent?parentView:(key!==undefined&&parentView)||View(context,"array",parentView,data,tmpl,key,contentTmpl,onRender);for(i=0,l=data.length;i<l;i++){dataItem=data[i];childView=View(context,"item",newView,dataItem,tmpl,(key||0)+i,contentTmpl,onRender);itemResult=tmpl.fn(dataItem,childView,$views);result+=newView._.onRender?newView._.onRender(itemResult,childView):itemResult}}else{newView=swapContent?parentView:View(context,tmplName||"data",parentView,data,tmpl,key,contentTmpl,onRender);if(tag_&&!self.flow){newView.tag=self}result+=tmpl.fn(data,newView,$views)}return outerOnRender?outerOnRender(result,newView):result}}return""}function error(message){if($viewsSettings.debugMode){throw new $views.sub.Error(message)}}function syntaxError(message){error("Syntax error\n"+message)}function tmplFn(markup,tmpl,isLinkExpr,convertBack){function pushprecedingContent(shift){shift-=loc;if(shift){content.push(markup.substr(loc,shift).replace(rNewLine,"\\n"))}}function blockTagCheck(tagName){tagName&&syntaxError('Unmatched or missing tag: "{{/'+tagName+'}}" in template:\n'+markup)}function parseTag(all,bind,tagName,converter,colon,html,comment,codeTag,params,slash,closeBlock,index){if(html){colon=":";converter="html"}slash=slash||isLinkExpr;var noError,current0,pathBindings=bind&&[],code="",hash="",passedCtx="",block=!slash&&!colon&&!comment;tagName=tagName||colon;pushprecedingContent(index);loc=index+all.length;if(codeTag){if(allowCode){content.push(["*","\n"+params.replace(rUnescapeQuotes,"$1")+"\n"])}}else{if(tagName){if(tagName==="else"){if(rTestElseIf.test(params)){syntaxError('for "{{else if expr}}" use "{{else expr}}"')}pathBindings=current[6];current[7]=markup.substring(current[7],index);current=stack.pop();content=current[3];block=true}if(params){params=params.replace(rNewLine," ");code=parseParams(params,pathBindings,tmpl).replace(rBuildHash,function(all,isCtx,keyValue){if(isCtx){passedCtx+=keyValue+","}else{hash+=keyValue+","}return""})}hash=hash.slice(0,-1);code=code.slice(0,-1);noError=hash&&(hash.indexOf("noerror:true")+1)&&hash||"";newNode=[tagName,converter||!!convertBack||"",code,block&&[],'params:"'+params+'",props:{'+hash+"}"+(passedCtx?",ctx:{"+passedCtx.slice(0,-1)+"}":""),noError,pathBindings||0];content.push(newNode);if(block){stack.push(current);current=newNode;current[7]=loc}}else{if(closeBlock){current0=current[0];blockTagCheck(closeBlock!==current0&&current0!=="else"&&closeBlock);current[7]=markup.substring(current[7],index);current=stack.pop()}}}blockTagCheck(!current&&closeBlock);content=current[3]}var newNode,allowCode=tmpl&&tmpl.allowCode,astTop=[],loc=0,stack=[],content=astTop,current=[,,,astTop];markup=markup.replace(rEscapeQuotes,"\\$1");blockTagCheck(stack[0]&&stack[0][3].pop()[0]);markup.replace(rTag,parseTag);pushprecedingContent(markup.length);if(loc=astTop[astTop.length-1]){blockTagCheck(""+loc!==loc&&(+loc[7]===loc[7])&&loc[0])}return buildCode(astTop,isLinkExpr?markup:tmpl,isLinkExpr)}function buildCode(ast,tmpl,isLinkExpr){var i,node,tagName,converter,params,hash,hasTag,hasEncoder,getsVal,hasCnvt,useCnvt,tmplBindings,pathBindings,elseStartIndex,elseIndex,nestedTmpls,tmplName,nestedTmpl,tagAndElses,allowCode,content,markup,notElse,nextIsElse,oldCode,isElse,isGetVal,prm,tagCtxFn,tmplBindingKey=0,code="",noError="",tmplOptions={},l=ast.length;if(""+tmpl===tmpl){tmplName=isLinkExpr?'data-link="'+tmpl.replace(rNewLine," ").slice(1,-1)+'"':tmpl;tmpl=0}else{tmplName=tmpl.tmplName||"unnamed";if(allowCode=tmpl.allowCode){tmplOptions.allowCode=true}if(tmpl.debug){tmplOptions.debug=true}tmplBindings=tmpl.bnds;nestedTmpls=tmpl.tmpls}for(i=0;i<l;i++){node=ast[i];if(""+node===node){code+='\nret+="'+node+'";'}else{tagName=node[0];if(tagName==="*"){code+=""+node[1]}else{converter=node[1];params=node[2];content=node[3];hash=node[4];noError=node[5];markup=node[7];if(!(isElse=tagName==="else")){tmplBindingKey=0;if(tmplBindings&&(pathBindings=node[6])){tmplBindingKey=tmplBindings.push(pathBindings)}}if(isGetVal=tagName===":"){if(converter){tagName=converter==="html"?">":converter+tagName}if(noError){prm="prm"+i;noError="try{var "+prm+"=["+params+"][0];}catch(e){"+prm+'="";}\n';params=prm}}else{if(content){nestedTmpl=TmplObject(markup,tmplOptions);nestedTmpl.tmplName=tmplName+"/"+tagName;buildCode(content,nestedTmpl);nestedTmpls.push(nestedTmpl)}if(!isElse){tagAndElses=tagName;oldCode=code;code="";elseStartIndex=i}nextIsElse=ast[i+1];nextIsElse=nextIsElse&&nextIsElse[0]==="else"}hash+=",args:["+params+"]}";if(isGetVal&&pathBindings||converter&&tagName!==">"){tagCtxFn=new Function("data,view,j,u"," // "+tmplName+" "+tmplBindingKey+" "+tagName+"\n"+noError+"return {"+hash+";");tagCtxFn.paths=pathBindings;tagCtxFn._ctxs=tagName;if(isLinkExpr){return tagCtxFn}useCnvt=1}code+=(isGetVal?"\n"+(pathBindings?"":noError)+(isLinkExpr?"return ":"ret+=")+(useCnvt?(useCnvt=0,hasCnvt=true,'c("'+converter+'",view,'+(pathBindings?((tmplBindings[tmplBindingKey-1]=tagCtxFn),tmplBindingKey):"{"+hash)+");"):tagName===">"?(hasEncoder=true,"h("+params+");"):(getsVal=true,"(v="+params+")!="+(isLinkExpr?"=":"")+'u?v:"";')):(hasTag=true,"{tmpl:"+(content?nestedTmpls.length:"0")+","+hash+","));if(tagAndElses&&!nextIsElse){code="["+code.slice(0,-1)+"]";if(isLinkExpr||pathBindings){code=new Function("data,view,j,u"," // "+tmplName+" "+tmplBindingKey+" "+tagAndElses+"\nreturn "+code+";");if(pathBindings){(tmplBindings[tmplBindingKey-1]=code).paths=pathBindings}code._ctxs=tagName;if(isLinkExpr){return code}}code=oldCode+'\nret+=t("'+tagAndElses+'",view,this,'+(tmplBindingKey||code)+");";pathBindings=0;tagAndElses=0}}}}code="// "+tmplName+"\nvar j=j||"+(jQuery?"jQuery.":"js")+"views"+(getsVal?",v":"")+(hasTag?",t=j._tag":"")+(hasCnvt?",c=j._cnvt":"")+(hasEncoder?",h=j.converters.html":"")+(isLinkExpr?";\n":',ret="";\n')+($viewsSettings.tryCatch?"try{\n":"")+(tmplOptions.debug?"debugger;":"")+code+(isLinkExpr?"\n":"\nreturn ret;\n")+($viewsSettings.tryCatch?"\n}catch(e){return j._err(e);}":"");try{code=new Function("data,view,j,u",code)}catch(e){syntaxError("Compiled template code:\n\n"+code,e)}if(tmpl){tmpl.fn=code}return code}function parseParams(params,bindings,tmpl){function parseTokens(all,lftPrn0,lftPrn,path,operator,err,eq,path2,prn,comma,lftPrn2,apos,quot,rtPrn,rtPrnDot,prn2,space,index,full){var expr;operator=operator||"";lftPrn=lftPrn||lftPrn0||lftPrn2;path=path||path2;prn=prn||prn2||"";function parsePath(all,object,helper,view,viewProperty,pathTokens,leafToken){if(object){bindings&&!isAlias&&bindings.push(path);if(object!=="."){var ret=(helper?'view.hlp("'+helper+'")':view?"view":"data")+(leafToken?(viewProperty?"."+viewProperty:helper?"":(view?"":"."+object))+(pathTokens||""):(leafToken=helper?"":view?viewProperty||"":object,""));ret=ret+(leafToken?"."+leafToken:"");return ret.slice(0,9)==="view.data"?ret.slice(5):ret}}return all}if(err){syntaxError(params)}else{if(bindings&&rtPrnDot){expr=pathStart[parenDepth];if(full.length-2>index-expr){expr=full.slice(expr,index+1);rtPrnDot=delimOpenChar1+":"+expr+delimCloseChar0;rtPrnDot=tmplLinks[rtPrnDot]=tmplLinks[rtPrnDot]||tmplFn(delimOpenChar0+rtPrnDot+delimCloseChar1,tmpl,true);if(!rtPrnDot.paths){parseParams(expr,rtPrnDot.paths=[],tmpl)}bindings.push({_jsvOb:rtPrnDot})}}return(aposed?(aposed=!apos,(aposed?all:'"')):quoted?(quoted=!quot,(quoted?all:'"')):((lftPrn?(parenDepth++,pathStart[parenDepth]=index++,lftPrn):"")+(space?(parenDepth?"":named?(named=isAlias=false,"\b"):","):eq?(parenDepth&&syntaxError(params),named=path,isAlias=path.charAt(0)==="~","\b"+path+":"):path?(path.split("^").join(".").replace(rPath,parsePath)+(prn?(fnCall[++parenDepth]=true,path.charAt(0)!=="."&&(pathStart[parenDepth]=index),prn):operator)):operator?operator:rtPrn?((fnCall[parenDepth--]=false,rtPrn)+(prn?(fnCall[++parenDepth]=true,prn):"")):comma?(fnCall[parenDepth]||syntaxError(params),","):lftPrn0?"":(aposed=apos,quoted=quot,'"'))))}}var named,isAlias,tmplLinks=tmpl.links,fnCall={},pathStart={0:-1},parenDepth=0,quoted=false,aposed=false;return(params+" ").replace(rParams,parseTokens)}function extendCtx(context,parentContext){return context&&context!==parentContext?(parentContext?$extend($extend({},parentContext),context):context):parentContext&&$extend({},parentContext)}for(jsvStoreName in jsvStores){registerStore(jsvStoreName,jsvStores[jsvStoreName])}var $templates=$views.templates,$converters=$views.converters,$helpers=$views.helpers,$tags=$views.tags,$viewsSub=$views.sub,$viewsSettings=$views.settings;if(jQuery){$=jQuery;$.fn.render=renderContent}else{$=global.jsviews={};$.isArray=Array&&Array.isArray||function(obj){return Object.prototype.toString.call(obj)==="[object Array]"}}$.render=$render;$.views=$views;$.templates=$templates=$views.templates;$tags({"else":function(){},"if":{render:function(val){var self=this,ret=(self.rendering.done||!val&&(arguments.length||!self.tagCtx.index))?"":(self.rendering.done=true,self.selected=self.tagCtx.index,self.tagCtx.render());return ret},onUpdate:function(ev,eventArgs,tagCtxs){var tci,prevArg,different;for(tci=0;(prevArg=this.tagCtxs[tci])&&prevArg.args.length;tci++){prevArg=prevArg.args[0];different=!prevArg!==!tagCtxs[tci].args[0];if(!!prevArg||different){return different}}return false},flow:true},"for":{render:function(val){var i,arg,self=this,tagCtx=self.tagCtx,noArg=!arguments.length,result="",done=noArg||0;if(!self.rendering.done){if(noArg){result=undefined}else{if(val!==undefined){result+=tagCtx.render(val);done+=$.isArray(val)?val.length:1}}if(self.rendering.done=done){self.selected=tagCtx.index}}return result},onUpdate:function(ev,eventArgs,tagCtxs){},onArrayChange:function(ev,eventArgs){var arrayView,self=this,change=eventArgs.change;if(this.tagCtxs[1]&&(change==="insert"&&ev.target.length===eventArgs.items.length||change==="remove"&&!ev.target.length||change==="refresh"&&!eventArgs.oldItems.length!==!ev.target.length)){this.refresh()}else{for(arrayView in self._.arrVws){arrayView=self._.arrVws[arrayView];if(arrayView.data===ev.target){arrayView._.onArrayChange.apply(arrayView,arguments)}}}ev.done=true},flow:true},include:{flow:true},"*":{render:function(value){return value},flow:true}});function getCharEntity(ch){return charEntities[ch]}$converters({html:function(text){return text!=undefined?String(text).replace(rHtmlEncode,getCharEntity):""},attr:function(text){return text!=undefined?String(text).replace(rAttrEncode,getCharEntity):text===null?null:""},url:function(text){return text!=undefined?encodeURI(String(text)):text===null?null:""}});$viewsDelimiters()})(this,this.jQuery);