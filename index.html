<!DOCTYPE html>
<html>

<head lang="en">
  <meta charset="UTF-8">
  <title>Graph O Matic</title>
  <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="css/bootstrap-theme.css">
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <link rel="stylesheet" type="text/css"
        href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />

  <!-- FROM CDN -->
  <!--<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>-->
  <!--<script src="//code.jquery.com/ui/1.9.2/jquery-ui.min.js"></script>-->
  <!--<script src="//cdn.jsdelivr.net/jsrender/1.0pre35/jsrender.min.js"></script>-->

  <!-- LOCAL -->
  <script src="js/libs/jquery/1.11.2/jquery.min.js"></script>
  <script src="js/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
  <script src="js/libs/jsRender/1.0pre35/jsrender.min.js"></script>

  <script src="js/libs/jsPlumb/1.7.5/jquery.jsPlumb-1.7.5-min.js "></script>
  <script src="js/libs/requirejs/require-min.js"></script>
  <script src="js/requireConfig.js">
  </script>
  <script src="js/bootstrap.min.js">
  </script>
  <script src="js/model.js">
  </script>
  <script src="js/toolbar.js">
  </script>
</head>

<body>

<div id="new-item-dialog">
  <table>
    <tr>
      <th>Title</th>
      <td><input type="text" id="new-item-title" class="new-item"></td>
    </tr>
    <tr>
      <th>Categories</th>
      <td><select id="new-item-category" class="new-item"/></td>
    </tr>
  </table>
</div>

<!--<script type="text/template" class="new-item" id="new-item-dialog-template">-->
  <!--<div id="new-item-dialog" class="popup">-->
  <!--<table>-->
    <!--<tr>-->
      <!--<th>Title</th>-->
      <!--<td><input type="text" id="new-item-title" class="new-item"></td>-->
    <!--</tr>-->
    <!--<tr>-->
      <!--<th>Categories</th>-->
      <!--<td><select id="new-item-category" class="new-item">-->
        <!--<% _.each( rc.categories, function( cat ){ %>-->

        <!--<option id="<%- cat.id%>">-->
          <!--<%- cat.name %>-->
        <!--</option>-->

        <!--<% }); %>-->

      <!--</td>-->
    <!--</tr>-->
  <!--</table>-->
<!--</div>-->
<!--</script>-->

<script type="text/template" class="new-item" id="relationship-selector-dialog-template">
<div id="relationship-selector-dialog" class="popup">
  <table>
    <tr>
      <th>Relationship</th>
      <td><select id="relationship-selector-relationship" class="new-item">
        <% _.each( rc.relationships, function( rel ){ %>

        <option value="<%- rel.id%>">
          <%- rel.name %>
        </option>

        <% }); %>
        </select>
      </td>
    </tr>
  </table>
</div>
</script>

<script type="text/template" class="graph-item" id="graph-item-template">
<div  class="graph-item" id="<%- 'graph-item:'+ rc.id %>">
  <table border="1" class="graph-table">
    <tr>
      <th colspan="3" class="graph-title"><%- rc.title %></th>
    </tr>
    <% if ( rc.images.length == 0 ){ %>
    <tr >

    </tr>

    <% } else { %>
    <tr >
      <td>
        <img src="<%- '/graph-it' + rc.images[0] %>" class="graph-image"/>
      </td>
      <td>
        <table>
          <tr><th valign="top" align="center" class="graph-item-notes-header">Notes</th></tr>
          <tr><td>
            <textarea rows="4" class="graph-item-notes" id="<%- 'graph-item-notes:'+ rc.id %>" >
              <% _.each(rc.notes, function( note) { %>
                <%- note  %>
              <% }) %>
            </textarea>
          </td></tr>
          <tr><td>
            <input type="text" class="graph-item-notes" id="<%- 'graph-item-note:'+ rc.id %>" />
            <button class="graph-item-new-note">Add Note</button>
          </td></tr>
        </table>
        </td>
    </tr>
    <% } %>

    <% if (rc.data.length > 0) { %>
      <tr>
        <th colspan="2">D A T A</th>
      </tr>

      <% _.each( rc.data, function( dataElement ){ %>
        <tr>
          <th class="graph-item-data-name" id="<%- rc.id + ':'+ dataElement.id  %>">
            <%- dataElement.name %>
          </th>
          <td class="graph-item-data-value">
            <%- dataElement.value %>
          </td>
        </tr>
      <% }) %>
    <% } %>

  </table>
</div>
</script>

<h1>
  Graph O Matic
</h1>
<div id="graph-toolbar" class="graph-toolbar">
  <table  class="graph-toolbar"><tr>
    <td><button id="graph-toolbar-new-item">New . . .</button></td>
  </tr></table>
</div>

<div class="graph-view" id="graph-view">

</div>

<script>
  require(["graph-it-app"], function (app) {
    app.initialize($("#graph-view"), function(app){
      var graph = app.graphService;
      var toolbar = app.toolbar;
        console.log("Inside Init. Here I can modify the app object.");
    });
  });
</script>

</body>

</html>
